{"version":3,"sources":["images/4.jpeg","Pages/AboutCurrentUser.js"],"names":["AboutCurrentUser","props","useState","userData","setuserData","history","useHistory","useEffect","user","projectFirestore","collection","where","uid","onSnapshot","snap","array","docs","map","doc","data","id","handleLogin","a","projectAuth","signInWithPopup","provider","alert","message","handleDelete","docRef","projectStorage","refFromURL","link","delete","push","Fragment","className","src","photoURL","alt","displayName","length","onClick","signOut","img","post","bind","type"],"mappings":"mLAAe,I,6BCgGAA,UA1Ff,SAA0BC,GAAQ,IAAD,EAEGC,mBAAS,IAFZ,mBAEtBC,EAFsB,KAEZC,EAFY,OAGCF,oBAAS,GAHV,mBAIvBG,GAJuB,UAIbC,eAElBC,qBAAU,WACJN,EAAMO,MACNC,IAAiBC,WAAW,SAASC,MAAM,KAAM,KAAMV,EAAMO,KAAKI,KAAKC,YAAW,SAAAC,GACjF,IAAMC,EAAQD,EAAKE,KAAKC,KAAI,SAAAC,GACrB,MAAO,CAACC,KAAMD,EAAIC,OAAQC,GAAIF,EAAIE,OAEtChB,EAAYW,SAOrB,IAAMM,EAAW,uCAAG,sBAAAC,EAAA,+EAETC,IAAYC,gBAAgBC,KAFnB,sDAIZC,MAAM,KAAIC,SAJE,wDAAH,qDAYXC,EAAe,SAACT,GACtB,IAAIU,EAASpB,IAAiBC,WAAW,SAASQ,IAAIC,EAAKC,IAC1CU,IAAeC,WAAWZ,EAAKa,MACrCC,SACXJ,EAAOI,SACP5B,EAAQ6B,KAAK,MAQZ,OACI,eAAC,IAAMC,SAAP,WACChC,GAAYF,EAAMO,MAAQ,sBAAK4B,UAAU,QAAf,UACvB,sBAAKA,UAAU,aAAf,UACE,qBAAKC,IAAKpC,EAAMO,KAAK8B,SAAUF,UAAU,gBAAgBG,IAAI,KAC9D,sBAAKH,UAAU,gBAAf,UACA,6BAAKnC,EAAMO,KAAKgC,cACf,sBAAKJ,UAAU,UAAf,UACA,6CACA,+BAAKjC,EAASsC,OAAd,qBAKA,qBAAKL,UAAU,MAAf,SACA,wBAAQA,UAAU,4BAA4BM,QAhCnC,WAClBnB,IAAYoB,WA+BL,wBAGC,sBAAKP,UAAU,cAAf,UACEjC,GAAa,qBAAKiC,UAAU,iBAAf,SACbjC,EAASc,KAAI,SAAA2B,GACd,OACE,sBAAKR,UAAU,mBAAf,UACE,qBAAKA,UAAU,cAAcC,IAAKO,EAAIzB,KAAK0B,KAAMN,IAAI,KACtDpC,GAAW,wBAAQiC,UAAU,aAAaM,QAASd,EAAakB,KAAK,KAAM,CAAC1B,GAAIwB,EAAIxB,GAAIY,KAAMY,EAAIzB,KAAK0B,OAA5F,6BAMb1C,GAAY,sDAMfF,EAAMO,MAAQ,sBAAK4B,UAAU,cAAf,UACX,sDACA,wBAAQW,KAAK,SAASX,UAAU,wBAAwBM,QAASrB,EAAjE,yC","file":"static/js/4.ccb44c8d.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/4.30f69aaa.jpeg\";","import React, {useState, useEffect} from 'react'\r\nimport image from '../images/4.jpeg'\r\nimport '../Styles/AboutCurrentUser.css'\r\nimport {projectAuth, provider, projectFirestore, projectStorage} from '../Firebase/config'\r\nimport {useHistory} from 'react-router-dom'\r\n\r\nfunction AboutCurrentUser(props) {\r\n\r\n    const [userData, setuserData] = useState([])\r\n    const [showBtn, setshowBtn] = useState(false)\r\n    const history = useHistory()\r\n\r\n  useEffect(() => {\r\n    if (props.user) {\r\n        projectFirestore.collection('posts').where('id', '==', props.user.uid).onSnapshot(snap => {\r\n         const array = snap.docs.map(doc => {\r\n                return {data: doc.data(), id: doc.id};\r\n            })\r\n            setuserData(array)\r\n        })\r\n    }\r\n  });\r\n\r\n    \r\n\r\n   const handleLogin = async () => {\r\n       try {\r\n        await projectAuth.signInWithPopup(provider)\r\n       } catch (err) {\r\n           alert(err.message)\r\n       }\r\n   }\r\n\r\n   const handleLogout =  () => {\r\n       projectAuth.signOut()\r\n   }\r\n\r\n   const handleDelete = (data) => {\r\n   let docRef = projectFirestore.collection('posts').doc(data.id)\r\n   let storageRef = projectStorage.refFromURL(data.link)\r\n   storageRef.delete()\r\n   docRef.delete()\r\n   history.push('/')\r\n   }\r\n\r\n \r\n     \r\n\r\n\r\n\r\n    return (\r\n        <React.Fragment>\r\n        {userData && props.user && <div className='about'>\r\n            <div className=\"about-user\">\r\n              <img src={props.user.photoURL} className=\"profile-image\" alt=\"\" />\r\n             <div className=\"user-activity\">\r\n             <h2>{props.user.displayName}</h2>\r\n              <div className=\"details\">\r\n              <h3>0 followers</h3>\r\n              <h3>{userData.length} posts</h3>\r\n              </div>\r\n             </div>\r\n          </div>\r\n\r\n              <div className=\"btn\">\r\n              <button className=\"login-with-google-btn two\" onClick={handleLogout} >Sign Out</button>\r\n               </div>\r\n\r\n               <div className=\"main-parent\">\r\n                {userData  && <div className=\"user-container\">\r\n                {userData.map(img => {\r\n                return (\r\n                  <div className='remove-container'>\r\n                    <img className=\"user-images\" src={img.data.post} alt=\"\" />\r\n                  {userData &&<button className=\"remove-btn\" onClick={handleDelete.bind(null, {id: img.id, link: img.data.post})}>Remove</button>}\r\n                  </div>\r\n                \r\n                )\r\n             })}\r\n               </div>}\r\n               {!userData && <h1>Loading Posts</h1>}\r\n              </div>\r\n            </div>}\r\n\r\n         \r\n\r\n            {!props.user && <div className='logout-page'>\r\n                 <h1>Login to Get Started</h1>\r\n                 <button type=\"button\" className=\"login-with-google-btn\" onClick={handleLogin} >\r\n               Sign in with Google\r\n             </button>\r\n                </div>}\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default AboutCurrentUser\r\n"],"sourceRoot":""}